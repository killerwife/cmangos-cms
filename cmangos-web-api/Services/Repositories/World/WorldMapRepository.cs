using Data.Dto.World;
using Data.Enum;
using Data.Model.Db2;
using Data.Model.DBC;

namespace Services.Repositories.World
{
    public class WorldMapRepository : IWorldMapRepository
    {
        private DBCRepository _dbcRepository;
        private Dictionary<int, Dictionary<int, UiMapAssignment>> _uiMapAssignments;

        public WorldMapRepository(DBCRepository dbcRepository)
        {
            _dbcRepository = dbcRepository;
            _uiMapAssignments = new();
            _uiMapAssignments[209] = new() // Shadowfang Keep
            {
                { 1, new UiMapAssignment(33, 209, 1, -319.88299560547, 2003.7698974609, -10000, -84.92960357666, 2356.1999511719, 1000000, [1339,1340,1341,1343,1344,1345,1346,1350])},
                { 2, new UiMapAssignment(33, 209, 2, -303.21499633789, 2147.556640625, -10000, -161.59700012207, 2359.9833984375, 1000000, [1359,1398,1399,1401,1380,1381,1382,1383])},
                { 3, new UiMapAssignment(33, 209, 3, -193.21603393555, 2103.7700195312, -10000, -91.59606933594, 2256.1999511719, 1000000, [1380,1381,1382,1383,1384,1385,1410,1380])},
                { 4, new UiMapAssignment(33, 209, 4, -193.21499633789, 2103.7700195312, 127, -91.59030151367, 2256.1999511719, 1000000, [1380,1386,1387,1388,1389,1390,1395,1379])},
                { 5, new UiMapAssignment(33, 209, 5, -193.21499633789, 2103.7700195312, -10000, -91.59030151367, 2256.1999511719, 1000000, [1379,1390,1391,1392,1393,1394,1395,1394])},
                { 6, new UiMapAssignment(33, 209, 6, -182.54602050781, 2080.7700195312, -10000, -50.25939178467, 2279.1999511719, 1000000, [1394,1396,1397,1338,1347,1348,1349,1357])},
                { 7, new UiMapAssignment(33, 209, 7, -278.21603393555, 2023.7700195312, -10000, -96.59606933594, 2296.1999511719, 1000000, [1338,1347,1348,1349,1357,1375,1376,1406])}
            };
            _uiMapAssignments[491] = new() // 491 - Razorfen Kraul
            {
                { 1, new UiMapAssignment(47, 491, 1, 1858.6800537109, 1322.4699707031, -10000, 2349.6398925781, 2058.919921875, 1000000, [2235,2236,2237,2238,2239,2240,2241,2242,2243,2244,2245,2246,2247,2248,2249,2250,2251,2252,2253,2255,2256,2257,2258,2259,2260])}
            };
            _uiMapAssignments[717] = new() // 717 - The Stockade
            {
                { 1, new UiMapAssignment(33, 717, 1, -319.88299560547, 2003.7698974609, -10000, -84.92960357666, 2356.1999511719, 1000000, [1339,1340,1341,1343,1344,1345,1346,1350,1351,1352,1353,1354,1355,1360,1361,1362,1363,1364,1365,1366,1367,1368,1369,1370,1371,1372,1373,1374,1377,1400,1402,1403,1404,1405,1411,5544])}
            };
            _uiMapAssignments[718] = new() // 718 - Wailing Caverns
            {
                { 1, new UiMapAssignment(43, 718, 1, -410.14633178711, -375.9460144043, -10000, 214.17033386231, 560.52899169922, 1000000, [3314,3315,3316,3317,3318,3319,3320,3321,3322,3323,3324,3325,3326,3327,3328,3330,3332,3333,3334,3335,3336,3337,3342,3343,5692,5693,6384,6416,6417,6418,6419,6420,6421,6422,6423,6424,6680,31294])}
            };
            _uiMapAssignments[719] = new() // 719 - Blackfathom Deeps
            {
                { 1, new UiMapAssignment(48, 719, 1, -677.14697265625, -381.29598999023, -10000, -87.66699981689, 502.92401123047, 1000000, [334,335,336,337,338,339,340,341,342,343,344,345,346,347,357,358])},
                { 2, new UiMapAssignment(48, 719, 2, -927.14697265625, -581.29602050781, -10000, -337.66696166992, 302.92401123047, 1000000, [348,349,350,351,352,353,354,355])},
                { 3, new UiMapAssignment(48, 719, 3, -877.14831542969, -281.29800415039, -10000, -687.66564941406, 2.92600011826, 1000000, [355])}
            };
            _uiMapAssignments[721] = new() // 721 - Gnomeregan
            {
                { 1, new UiMapAssignment(90, 721, 1, -694, -277.77200317383, -10000, -180.88800048828, 491.89599609375, 1000000, [1113,1114,1115,1116,1117,1119,1120,1122,1127,1129,1131,1172,6957])},
                { 2, new UiMapAssignment(90, 721, 2, -714, -77.77200317383, -10000, -200.88800048828, 691.89599609375, 1000000, [1105,1106,1107,1108,1109,1110,1111,1112,1117,1118,1119,1121,1122,1123,1124,1125,1130,1131,1132,1133,1134,1137,1139,1140,1166])},
                { 3, new UiMapAssignment(90, 721, 3, -967.3330078125, -127.77200317383, -10000, -387.55499267578, 741.89599609375, 1000000, [1135,1138,1149,1155,1156,1157,1158,1159,1160,1161,1162,7187,7188,7189,7190,7191,7192,7193,7194,18695,18696,18697,18698])},
                { 4, new UiMapAssignment(90, 721, 4, -937.333984375, 72.9992980957, -10000, -357.5539855957, 942.66900634766, 1000000, [1104,1135,1141,1142,1143,1145,1146,1147,1148,1149,1151,1152,1153,1154,1167,1168,1169,1170])}
            };
            _uiMapAssignments[722] = new() // 722 - Razorfen Downs
            {
                { 1, new UiMapAssignment(129, 722, 0, 2209.8500976562, 570.89099121094, -10000, 2682.5500488281, 1279.9399414062, 1000000, [5911,5912,5913,5914,5915,5916,5917,5918,5919,5923,5924])}
            };
            _uiMapAssignments[796] = new() // 796 - Scarlet Monastery
            {
                { 1, new UiMapAssignment(189, 796, 1, 1616.8586425781, 947.98602294922, -10000, 2030.1813964844, 1567.9699707031, 1000000, [7874,7875,7876,7877,7878,7879,7883,7884,7885,7886,7887,7888,7889,7890,7891,7892,7893,7894,7895,7896,7897,7898,7899,7900])},
                { 2, new UiMapAssignment(189, 796, 2, 93.90550231934, -482.46398925781, -10000, 307.36599731445, -162.27299499512, 1000000, [7923,7924,7925,7926,7927,7928,7929,7930,7932,7933,7934,7935,7936,7937,7938,7939,7940,7941,7943,7944,7947])},
                { 3, new UiMapAssignment(189, 796, 3, 1600.6400146484, -562.42401123047, -10000, 2009.0999755859, 50.2725982666, 1000000, [7949,7951,7952,7953,7954,7955,7956,7957,7958,7959,7960,7961,7962,7963,14693,14694,14695,14696,14697,14698])},
                { 4, new UiMapAssignment(189, 796, 4, 812.42370605469, 1040.6899414062, -10000, 1281.2904052734, 1743.9899902344, 1000000, [7901,7903,7904,7905,7906,7907,7908,7910,7911,7912,7913,7914,7915,7916,7917,7918,7919,7920,7921,7968,8548,14690,14691,14692])}
            };
            _uiMapAssignments[1176] = new() // 1176 - Zul'Farrak
            {
                { 0, new UiMapAssignment(209, 1176, 0, 1129.1669921875, 241.666015625, -1000000, 2052.0830078125, 1625, 1000000, [0])}
            };
            _uiMapAssignments[1337] = new() // 1337 - Uldaman
            {
                { 1, new UiMapAssignment(70, 0, 0, -391.47299194336, -248.54899597168, -10000, 204.30599975586, 645.11901855469, 1000000, [1259,1260,1261,1262,1263,1264,1265,1266,1268,1270,1271,1272,1273,1274,1275,1276,1277,1278,1279,1280,1281,1282,1283,1284,1285,1286,1287,1289,1291,1292,1293,1294,1295,1296,1297,1298,1299,1300,1301,1302,1303,6174,8105,8106,8107,8108,8109])}
            };
            _uiMapAssignments[1417] = new() // 1417 - Sunken Temple - changed in cata - never had full map
            {
                { 0, new UiMapAssignment(70, 0, 0, -718.51898193359, -252.2712097168, -1000000, -255.16600036621, 442.75820922852, 1000000, 0)} // TODO: Better alignment
            };
            _uiMapAssignments[1581] = new() // 1581 - The Deadmines
            {
                { 1, new UiMapAssignment(36, 1581, 0, -337.50900268555, -796.62200927734, -10000, 35.33349990845, -237.35800170898, 1000000, [193,194,195,196,197,198,199,200,201,202,203,205,211,212,213,214,240,246])},
                { 2, new UiMapAssignment(36, 1581, 0, -267.50900268555, -1016.6199951172, -10000, 65.33329772949, -517.35699462891, 1000000, [206,207,209,210,214,227,233,239,245,12510,12511])},
            };
            _uiMapAssignments[1583] = new() // Blackrock Spire
            {
                { 1, new UiMapAssignment(229, 1583, 1, -286.82800292969, -876.25201416016, -10000, 304.39801025391, 10.58699989319, 1000000, [13085,13087,13088,13090,13091,13092,13093,13094])},
                { 2, new UiMapAssignment(229, 1583, 2, -286.82800292969, -876.25201416016, 10, 304.39801025391, 10.58699989319, 1000000, [13085,13087,13088,13089,13093,13096,13097,13098])},
                { 3, new UiMapAssignment(229, 1583, 3, -286.82800292969, -876.25201416016, -10000, 304.39801025391, 10.58699989319, 1000000, [13052,13085,13087,13095,13115,13116])},
                { 4, new UiMapAssignment(229, 1583, 4, -286.82800292969, -876.25201416016, -10000, 304.39801025391, 10.58699989319, 1000000, [13045,13049,13052,13053,13054,13055,13056,13057,13060,13061,13083,13085,13099])},
                { 5, new UiMapAssignment(229, 1583, 5, -286.82800292969, -876.25201416016, -10000, 304.39801025391, 10.58699989319, 1000000, [13058,13062,13063,13070,13084,13099,13100,13113,13114,13122,13123,17890])},
                { 6, new UiMapAssignment(229, 1583, 6, -286.82800292969, -876.25201416016, -10000, 304.39801025391, 10.58699989319, 1000000, [13064,13068,13069,13070,13085,13101,13120])},
                { 7, new UiMapAssignment(229, 1583, 7, -286.82800292969, -876.25201416016, -10000, 304.39801025391, 10.58699989319, 1000000, [13065,13124,13118])} // might be missing some wmos
            };
            _uiMapAssignments[1584] = new() // 1584 - Blackrock Depths
            {
                { 1, new UiMapAssignment(230, 1584, 1, 248.63966369629, -884.72399902344, -10000, 1186.6804199219, 522.33697509766, 1000000, [13127,13134,13135,13136,13137,13138,13139,13140,13141,13142,13143,13144,13145,13148,13149,13150,13151,13160,13187])},
                { 2, new UiMapAssignment(230, 1584, 2, 495.30282592773, -934.72399902344, -10000, 1500.0102539062, 572.33697509766, 1000000, [13141,13143,13146,13147,13149,13150,13151,13152,13153,13154,13155,13156,13157,13158,13159,13160,13161,13162,13163,13164,13165,13166,13167,13168,13169,13170,13182,13183,13184,13185,13186,13188,13190])},
            };
            _uiMapAssignments[1977] = new() // 1977 - Zul'Gurub
            {
                { 0, new UiMapAssignment(309, 1977, 0, -12560.416015625, -2570.8332519531, -1000000, -11308.333007812, -693.75, 1000000, [0])} // TODO: Realign
            };
            _uiMapAssignments[2017] = new() // 2017 - Stratholme
            {
                { 1, new UiMapAssignment(329, 2017, 1, 3338.9699707031, -3617.6799316406, -10000, 3809.4499511719, -2911.9599609375, 1000000, [17737,17738,17739,17740,17741,17742,17743,17745,17746,17749,17751,17776,17777,17778,17779,17780,17781,17787,17788,17789,17790,17791,17792,17793,17794,17795,17800,17806,17807,17817,17818,17819,17820,17821,17822,17823,17824,17825,17826,17827,18410])},
                { 2, new UiMapAssignment(329, 2017, 2, 3498.9699707031, -3967.6801757812, -10000, 4169.4501953125, -2961.9597167969, 1000000, [17744,17749,17752,17753,17754,17755,17756,17757,17758,17759,17760,17761,17762,17763,17764,17765,17766,17767,17768,17769,17770,17771,17772,17773,17774,17775,17782,17783,17784,17785,17786,17802,17803,17808,17812,17813,17814,17815,17816])},
            };
            _uiMapAssignments[2057] = new() // 2057 - Scholomance
            {
                { 1, new UiMapAssignment(289, 2057, 1, 104.33300018311, -68.63890075684, -10000, 317.69799804688, 251.41000366211, 1000000, [17294,17311,17312])},
                { 2, new UiMapAssignment(289, 2057, 2, 44.33259963989, -128.63900756836, -10000, 337.69900512695, 311.41000366211, 1000000, [17311,17313,17314,17315,17316,17317,17319,17321,17323,17870])},
                { 3, new UiMapAssignment(289, 2057, 3, 34.32120132446, -113.63899993897, -10000, 307.70700073242, 296.43899536133, 1000000, [17304,17305,17306,17316,17319,17320,18950])},
                { 4, new UiMapAssignment(289, 2057, 4, -66.32119750977, -174.12199401856, -10000, 287.70700073242, 356.92001342773, 1000000, [17307,17308,17317,17318,17320,17471])}
            };
            _uiMapAssignments[2100] = new() // 2100 - Maraudon
            {
                { 1, new UiMapAssignment(349, 2100, 1, 550, -827.5, -10000, 1200, 147.5, 1000000, [17073,17074,17075,17076,17077,17078,17079,17080,17081,17086,17088,17089,17091,17092,17093,17094,17095,17097,17911,17912,19050,19051])},
                { 2, new UiMapAssignment(349, 2100, 2, -208.33299255371, -1158.75, -10000, 883.3330078125, 478.75, 1000000, [17052,17053,17054,17055,17056,17057,17058,17059,17060,17061,17062,17063,17064,17065,17066,17067,17068,17069,17070,17071,17072])},
            };
            _uiMapAssignments[2437] = new() // 2437 - Ragefire Chasm
            {
                { 1, new UiMapAssignment(389, 2437, 1, -452.95300292969, -285.99301147461, -10000, 39.62319946289, 452.87100219727, 1000000, [17670,17671,17672,17673,17674,17681])}
            };
            _uiMapAssignments[2557] = new() // 2557 - Dire Maul
            {
                { 0, new UiMapAssignment(429, 2557, 0, 0, 0, -1000000, 0, 0, 1000000, [0,18135,18136,18138,18139,18161,18179,18180])},
                { 1, new UiMapAssignment(429, 2557, 1, 200, -387.5, -10000, 1050, 887.5, 1000000, [18135,18136,18138,18139,18161,18179,18180,18181,18187,18194,18195,18196,18197,18430,18431,18432])},
                { 2, new UiMapAssignment(429, 2557, 2, -150, 125, -10000, 200, 650, 1000000, [18116,18125,18126,18127,18128,18129,18151,18152,18158])},
                { 3, new UiMapAssignment(429, 2557, 3, -150, 231.25, -10000, 175, 718.75, 1000000, [18170,18171])},
                { 4, new UiMapAssignment(429, 2557, 4, -250, 325, -10000, 250, 1075, 1000000, [18153,18154,18155,18156,18157,18168,18169,18172])},
                { 5, new UiMapAssignment(429, 2557, 5, -281.6669921875, -900, -10000, 251.66700744629, -99.99919891357, 1000000, [18130,18131,18140,18141,18142,18143,18144,18145,18146,18147,18148,18149,18160,18173,18175,18176,18200,18201,18251])},
                { 6, new UiMapAssignment(429, 2557, 6, -200, -862.5, -10000, 450, 112.5, 1000000, [18117,18120,18121,18122,18150,18159,18162,18163,18164,18165,18166,18167,18177,18178,18189,18190,18191,18199,18692])}
            };
            _uiMapAssignments[2677] = new() // 2677 - Blackwing Lair
            {
                { 1, new UiMapAssignment(469, 2677, 1, -7727.0698242188, -1344.0500488281, -10000, -7394.1201171875, -844.62200927734, 1000000, [15175,15181,15182,15183,15185])},
                { 2, new UiMapAssignment(469, 2677, 2, -7777.0698242188, -1379.0500488281, 420, -7344.1201171875, -729.62298583984, 1000000, [15185,15186,15187,15188])},
                { 3, new UiMapAssignment(469, 2677, 3, -7757.0698242188, -1369.0500488281, 445, -7324.1201171875, -719.62298583984, 1000000, [15188,19133,19134,19135,19136])},
                { 4, new UiMapAssignment(469, 2677, 4, -7637.0698242188, -1419.0500488281, -10000, -7204.1201171875, -769.62298583984, 1000000, [15174,15178,19132,19135,19136,19137,19138,19139])}
            };
            _uiMapAssignments[2717] = new() // 2717 - Molten Core
            {
                { 1, new UiMapAssignment(409, 2717, 1, 459.86099243164, -1395.5600585938, -10000, 1303.0600585938, -130.75999450684, 1000000, [14763,14764,14765,14766,14767,14768,14769,14770,14771,14772,14773,14775])}
            };
            _uiMapAssignments[3428] = new() // 3428 - Ahn'Qiraj
            {
                { 1, new UiMapAssignment(531, 3428, 1, -9510.9833984375, 138.07600402832, -10000, -7659.287109375, 2915.6201171875, 1000000, [67,69,71,72,74,75,76,77,81,13614,13616,13617,13618,13619,13621,13625,13626,13628,13629,13630,13725,13726,13729,13731,13734,13735,19519,19584,19585,19586,19587,19588,19589,20044,20087,20088])},
                { 2, new UiMapAssignment(531, 3428, 2, -8703.5029296875, 1538.0699462891, -10000, -8051.7963867188, 2515.6298828125, 1000000, [49,81,13627,0])},
                { 3, new UiMapAssignment(531, 3428, 3, -8720.169921875, 1738.0698242188, -10000, -8335.1298828125, 2315.6298828125, 1000000, [47,55,56,57,76,77,87,13610,13613,13729,20086])}
            };
            _uiMapAssignments[3429] = new() // 3429 - Ruins of Ahn'Qiraj
            {
                { 0, new UiMapAssignment(509, 3429, 0, -9908.3330078125, 522.91662597656, -1000000, -8233.3330078125, 3035.4165039062, 1000000, [0])}
            };
            _uiMapAssignments[2159] = new() // Onyxia's Lair
            {
                { 1, new UiMapAssignment(249, 2159, 1, -223.83299255371, -371.73498535156, -10000, 98.24579620361, 111.38300323486, 1000000, [13551,13552,13553,13554,13555,13556,13557,13558])}
            };
            _uiMapAssignments[2366] = new() // Black Morass
            {
                { 0, new UiMapAssignment(269, 2366, 0, -2225, 6562.4995117188, -1000000, -1500, 7649.9995117188, 1000000, 0)}
            };
            _uiMapAssignments[2367] = new() // OHF
            {
                { 0, new UiMapAssignment(560, 2367, 0, 1572.9166259766,-477.08331298828,-1000000,3127.0832519531,1854.1666259766,1000000, 0)}
            };
            _uiMapAssignments[3456] = new() // Naxxramas
            {
                { 1, new UiMapAssignment(533, 3456, 1, 2886.6101074219, -3734.1000976562, -10000, 3615.830078125, -2640.2700195312, 1000000, [19875,19879,19893,19897,19898,19899,19900,19901])},
                { 2, new UiMapAssignment(533, 3456, 2, 2886.6101074219, -4234.1000976562, -10000, 3615.830078125, -3140.2700195312, 1000000, [19866,19867,19868,19869,19870,19871,19872,19873])},
                { 3, new UiMapAssignment(533, 3456, 3, 2336, -3787, -10000, 3136, -2587, 1000000, [19884,19885,19886,19887,19888,19889,19890,19892])},
                { 4, new UiMapAssignment(533, 3456, 4, 2336.6101074219, -4287.3500976562, -10000, 3136.830078125, -3087.0200195312, 1000000, [19906,19907,19908,19909,19910,19911,19913,19914])},
                { 5, new UiMapAssignment(533, 3456, 5, 2311.3400878906, -4400.08984375, -10000, 3691.2199707031, -2330.2800292969, 1000000, [19931,20064,20118,20119,20120,25154,0,0])},
                { 6, new UiMapAssignment(533, 3456, 6, 3379.25, -5522.2900390625, -10000, 3816.5400390625, -4866.3500976562, 1000000, [20064,20118,20119,20120,25154,0,0,0])}
            };
            _uiMapAssignments[3457] = new() // Kara
            {
                { 1, new UiMapAssignment(532, 3457, 1, -11189.599609375, -2225.0244140625, -10000, -10822.900390625, -1674.9755859375, 1000000, [19619,19622,19648,19651,19686,22149])},
                { 2, new UiMapAssignment(532, 3457, 2, -11189.002929688, -2081.419921875, 65, -11017.096679688, -1823.5600585938, 1000000, [19621,19686,19698])},
                { 3, new UiMapAssignment(532, 3457, 3, -11066.299804688, -2132.5747070312, -10000, -10836.200195312, -1787.4252929688, 1000000, [19649,19650,19652])},
                { 4, new UiMapAssignment(532, 3457, 4, -11119.599609375, -2190.0244140625, -10000, -10772.900390625, -1669.9755859375, 1000000, [19625,19626,19627,19628,19629,19633,19634,19635,19636,19637,19640,19650,19652,19747,19748,22148])},
                { 5, new UiMapAssignment(532, 3457, 5, -10969.299804688, -1932.5799560547, 105, -10813.200195312, -1698.4300537109, 1000000, [19634])},
                { 6, new UiMapAssignment(532, 3457, 6, -11190.599609375, -2205.7744140625, -10000, -10802.900390625, -1624.2255859375, 1000000, [19620,19634,19638,19639,19641,19643,19646,19647,20096])},
                { 7, new UiMapAssignment(532, 3457, 7, -11115.599609375, -2066.7744140625, 100, -10987.900390625, -1875.2255859375, 1000000, [19620,19644,19645,19647])},
                { 8, new UiMapAssignment(532, 3457, 8, -11105.200195312, -2037.6802978516, 140, -11012.299804688, -1898.3297119141, 1000000, [19644,19645])},
                { 9, new UiMapAssignment(532, 3457, 9, -11459.599609375, -2270.0244140625, 155, -10952.900390625, -1509.9755859375, 1000000, [19644,19656,19657,19685,20099,20100])},
                { 10, new UiMapAssignment(532, 3457, 10, -11386.333007812, -2040.1300048828, -10000, -11086.166992188, -1589.8800048828, 1000000, [19675,19677,19678,19681,19685])},
                { 11, new UiMapAssignment(532, 3457, 11, -11285.099609375, -1825.5300292969, -10000, -11104.400390625, -1554.4799804688, 1000000, [19679,19680])},
                { 12, new UiMapAssignment(532, 3457, 12, -11444.599609375, -2182.5244140625, -10000, -11047.900390625, -1587.4755859375, 1000000, [19676,19685])},
                { 13, new UiMapAssignment(532, 3457, 13, -11339.099609375, -1963.0244140625, -10000, -10986.400390625, -1433.9755859375, 1000000, [19682,19683,19685])},
                { 14, new UiMapAssignment(532, 3457, 14, -11143, -2032.6300048828, 225, -10979.5, -1787.3800048828, 1000000, [19620,19658,19661,19664,20085])},
                { 15, new UiMapAssignment(532, 3457, 15, -11113.6328125, -2025.0799560547, -10000, -10972.8671875, -1813.9300537109, 1000000, [19659,19662,19663,19664,19665])},
                { 16, new UiMapAssignment(532, 3457, 16, -11097, -2020.1300048828, 260, -11029.5, -1918.8800048828, 1000000, [19620,19664,19674])},
                { 17, new UiMapAssignment(532, 3457, 17, -11102, -2155.1298828125, 270, -10874.5, -1813.8798828125, 1000000, [19620,19660,19664,19666,19667,19668,19669,19670,19671,19672,19684])},
            };
            _uiMapAssignments[3562] = new() // HFR
            {
                { 0, new UiMapAssignment(543, 3562, 0, -1492.4799804688, 1294.7199707031, -10000, -1029.4399414062, 1989.2800292969, 1000000, [0])},
            };
            _uiMapAssignments[3606] = new() // Hyjal
            {
                { 0, new UiMapAssignment(534, 3606, 0, 4479.1665039062, -4024.9997558594, -1000000, 6145.8330078125, -1525, 1000000, [0])},
            };
            _uiMapAssignments[3607] = new() // SSC
            {
                { 0, new UiMapAssignment(548, 3607, 0, -400, -1362.5004882812, -10000, 650.00201416016, 212.50248718262, 1000000, [0])}, 
            };
            _uiMapAssignments[3713] = new() // BF
            {
                { 0, new UiMapAssignment(542, 3713, 0, -65.87670135498, -504.5299987793, -10000, 603.13598632813, 498.98901367188, 1000000, [0])},
            };
            _uiMapAssignments[3714] = new() // SHH
            {
                { 0, new UiMapAssignment(540, 3714, 0, -91.74800109863, -432.63925170898, -10000, 617.4169921875, 631.10821533203, 1000000, [0])},
            };
            _uiMapAssignments[3715] = new() // SV
            {
                { 1, new UiMapAssignment(545, 3715, 1, -425.94219970703, -716.74200439453, -28, 158.56721496582, 160.02200317383, 1000000, [20472,20473,22230,22231,22232])},
                { 2, new UiMapAssignment(545, 3715, 2, -425.94219970703, -716.74200439453, -10000, 158.56721496582, 160.02200317383, 1000000, [20472,20473,22230,22231,22232])},
            };
            _uiMapAssignments[3716] = new() // UB
            {
                { 0, new UiMapAssignment(546, 3716, 0, -172.87818908691, -653.94299316406, -10000, 423.73516845703, 240.97700500488, 1000000, [0])},
            };
            _uiMapAssignments[3717] = new() // SP
            {
                { 0, new UiMapAssignment(547, 3717, 0, -391.65203857422, -836.1240234375, -10000, 201.72003173828, 53.93410110474, 1000000, [0])}, 
            };
            _uiMapAssignments[3789] = new() // SL
            {
                { 0, new UiMapAssignment(555, 3789, 0, -498.21798706055, -656.44317626953, -10000, 62.79690170288, 185.07917785645, 1000000, [0])}, 
            };
            _uiMapAssignments[3790] = new() // Auchenai Crypts
            {
                { 0, new UiMapAssignment(558, 3790, 0, -300, -665, -1000000, 285, 254, 1000000, 0)},
                { 1, new UiMapAssignment(558, 3790, 1, -140.07600402832, -414.98321533203, -10000, 354.95098876953, 327.55722045898, 1000000, [20957,20958,21480])},
                { 2, new UiMapAssignment(558, 3790, 2, -210.07600402832, -602.48321533203, -10000, 334.95098876953, 215.05725097656, 1000000, [20953,20958,20960,20976,20977,20978,21104,21497,22202,22203,22223])},
            };
            _uiMapAssignments[3791] = new() // SH
            {
                { 1, new UiMapAssignment(556, 3791, 1, -295.34298706055, -187.6982421875, -10000, 173.65400695801, 515.79724121094, 1000000, [21009,21281,21553,21555,21556,21557,21559,21560,22059,22064])},
                { 2, new UiMapAssignment(556, 3791, 2, -295.34298706055, -187.6982421875, 13, 173.65400695801, 515.79724121094, 1000000, [21009,21024,21287,21552,21561,22060,22061,22062,22063])},
            };
            _uiMapAssignments[3792] = new() // MT
            {
                { 0, new UiMapAssignment(557, 3792, 0, -458.78601074219, -546.35107421875, -10000, 90.07080078125, 276.93408203125, 1000000, [0])}, 
            };
            _uiMapAssignments[3805] = new() // Zul'Aman
            {
                { 0, new UiMapAssignment(568, 3805, 0, -277.08331298828,583.33331298828,-1000000,568.75,1852.0832519531,1000000, 0)}
            };
            _uiMapAssignments[3836] = new() // Magtheridon
            {
                { 0, new UiMapAssignment(544, 3836, 0, -115.33335113525, -170.5, -10000, 255.33334350586, 385.5, 1000000, [0])}, 
            }; 
            _uiMapAssignments[3845] = new() // Tempest Keep
            {
                { 0, new UiMapAssignment(550, 3845, 0, -100, -787.5, -10000, 950, 787.5, 1000000, 0)}
            };
            _uiMapAssignments[3847] = new() // Botanica
            {
                { 0, new UiMapAssignment(553, 3847, 0, -256.91000366211, -107.64924621582, -10000, 248.02499389648, 649.75323486328, 1000000, [0])},
            };
            _uiMapAssignments[3848] = new() // Arcatraz
            {
                { 1, new UiMapAssignment(552, 3848, 1, -75.42433166504, -405.10501098633, -10000, 384.36502075195, 284.57901000977, 1000000, [21432,21708,21709,21715,21716,21784])},
                { 2, new UiMapAssignment(552, 3848, 2, 44, -245.28703308106, -10000, 408.03201293945, 300.7610168457, 1000000, [21713,21716,21786,21787,21789,21790,21791,21792,21793])},
                { 3, new UiMapAssignment(552, 3848, 3, 150.83297729492, -422.60501098633, -10000, 575.28900146484, 214.07899475098, 1000000, [21712,21783,21785,21787,21788,21789])},
            };
            _uiMapAssignments[3849] = new() // Mechanar
            {
                { 1, new UiMapAssignment(554, 3849, 1, -100.83920288086, -341.7799987793, -10000, 349.98620605469, 334.4580078125, 1000000, [21113,21249,21251,21252,21258,21259,21260,21913])},
                { 2, new UiMapAssignment(554, 3849, 2, -37.83934402466, -341.7799987793, 24, 412.98602294922, 334.4580078125, 1000000, [21113,21249,21250,21255,21256,21257,21912])},
            };
            _uiMapAssignments[3923] = new() // Gruul
            {
                { 0, new UiMapAssignment(565, 3923, 0, -12.5, -50, -10000, 337.5, 475, 1000000, [0])},
            };   
            _uiMapAssignments[3959] = new() // Black Temple
            {
                { 0, new UiMapAssignment(564, 3959, 0, 427.08331298828, 366.66665649414, -1000000, 949.99993896484, 1150, 1000000, 0) },
                { 1, new UiMapAssignment(564, 3959, 1, -240, 23.87053871155, -10000, 594.8330078125, 1276.1201171875, 1000000, [22363,22364,22365,22366,22367,22368,22369,22500])},
                { 2, new UiMapAssignment(564, 3959, 2, 380, -176, -10000, 1030, 799, 1000000, [21697, 21700, 21701, 22071, 22072, 22340, 22355, 22360, 22427, 22428, 22442, 22496, 22499])},
                { 3, new UiMapAssignment(564, 3959, 3, 400, -191, -10000, 1070, 814, 1000000, [22070, 22073, 22074, 22075, 22429])},
                { 4, new UiMapAssignment(564, 3959, 4, 343.3330078125, 134.99951171875, 185, 636.6669921875, 575.00048828125, 1000000, [21697, 22344, 22348, 22426])},
                { 5, new UiMapAssignment(564, 3959, 5, 664.16363525391, -70, -10000, 1110.8303222656, 600, 1000000, [22341, 22342, 22346, 22353, 22478])},
                { 6, new UiMapAssignment(564, 3959, 6, 450, -67.5, -10000, 920, 637.5, 1000000, [22343, 22345, 22347, 22352])},
                { 7, new UiMapAssignment(564, 3959, 7, 606.66668701172, 137.5, -10000, 843.33331298828, 492.5, 1000000, 22351)},
            };
            _uiMapAssignments[4075] = new() // Sunwell
            {
                { 0, new UiMapAssignment(580, 4075, 0, 1408.3299560547, 300, -1000000, 2012.5, 1206.25, 1000000, [0])},
                { 1, new UiMapAssignment(580, 4075, 1, 1580, 377.5, -10000, 1890, 842.5, 1000000, [23468,23469])},
            };
            _uiMapAssignments[4131] = new() // Mgt
            {
                { 1, new UiMapAssignment(585, 4131, 1, -27.79583740234, -304.22601318359, -10000, 325.76013183594, 226.10800170898, 1000000, [23119,23120,23121,23125,23162,23171,23731,23732])},
                { 2, new UiMapAssignment(585, 4131, 2, -27.79589080811, -304.22601318359, -3, 325.76010131836, 226.10800170898, 1000000, [23121,23122,23123,23167,23168,23169,23170,23171,23733,23734,26192])},
            };
            foreach (var dungMap in _dbcRepository.DungeonMaps)
            {
                int zoneId;
                var worldMapAreaEntry = _dbcRepository.WorldMapArea.Where(p => p.Value.Map == dungMap.Value.Map && p.Value.Area == 0).FirstOrDefault();
                if (worldMapAreaEntry.Equals(default(KeyValuePair<int, WorldMapArea>)))
                {
                    zoneId = (int)_dbcRepository.Areas.Where(p => p.Value.mapid == dungMap.Value.Map).Select(s => s.Value.zone == 0 ? (int)s.Value.ID : (int)s.Value.zone).First();
                }
                else
                {
                    zoneId = (int)worldMapAreaEntry.Value.Area;
                }

                if (!_uiMapAssignments.ContainsKey(zoneId))
                {
                    _uiMapAssignments.Add(zoneId, new());
                }

                var wmoGroupIds = _dbcRepository.DungeonMapChunks.Where(p => p.Value.DungeonMap == dungMap.Key).Select(p => (int)p.Value.WmoGroupId).ToList();

                if (_uiMapAssignments[zoneId].ContainsKey((int)dungMap.Value.Index))
                    continue;

                _uiMapAssignments[zoneId].Add((int)dungMap.Value.Index, new UiMapAssignment((int)dungMap.Value.Map, zoneId, dungMap.Value.Index, dungMap.Value.Top, dungMap.Value.Right, -1000000, dungMap.Value.Bottom, dungMap.Value.Left, 1000000, wmoGroupIds));
            }
            foreach (var zoneMap in _uiMapAssignments)
            {
                foreach (var uiMap in zoneMap.Value)
                {
                    if (uiMap.Value.WmoGroupId.Count() == 0)
                        continue;

                    foreach (var wmoGroupId in uiMap.Value.WmoGroupId)
                    {
                        if (wmoGroupId != 0)
                        {
                            var result = _dbcRepository.WmoAreas.Where(p => p.Value.WmoGroupId == wmoGroupId).FirstOrDefault();
                            if (result.Equals(default(KeyValuePair<int, WorldMapArea>)))
                                continue;

                            uiMap.Value.WmoAreaOverride = result.Value.WmoAreaOverride;
                            break;
                        }
                    }
                }
            }
        }

        public int PickIndexForXyz(float x, float y, float z, int zoneId)
        {
            if (_uiMapAssignments.ContainsKey(zoneId))
            {
                foreach (var pair in _uiMapAssignments[zoneId])
                {
                    if (x >= pair.Value.MinX && x <= pair.Value.MaxX &&
                        y >= pair.Value.MinY && y <= pair.Value.MaxY &&
                        z >= pair.Value.MinZ && z <= pair.Value.MaxZ)
                        return pair.Key;
                }

                return 0;
            }

            return 0;
        }

        public UiMapAssignment? GetWorldMapArea(int mapId, int zoneId, int index)
        {
            KeyValuePair<int, WorldMapArea> areaEntry;
            if (zoneId == -1)
            {
                int worldMapId = 0;
                switch (mapId)
                {
                    case 0: worldMapId = 14; break;
                    case 1: worldMapId = 13; break;
                    case 530: worldMapId = 466; break;
                    case 571: worldMapId = 485; break;
                }
                areaEntry = _dbcRepository.WorldMapArea.Where(p => p.Key == worldMapId && mapId == p.Value.Map).SingleOrDefault();

                if (areaEntry.Equals(default(KeyValuePair<int, WorldMapArea>)))
                    return null;

                return new UiMapAssignment(mapId, zoneId, (uint)index, areaEntry.Value);
            }
            else
            {
                if (_uiMapAssignments.ContainsKey(zoneId))
                {
                    if (_uiMapAssignments[zoneId].ContainsKey(index))
                    {
                        return _uiMapAssignments[zoneId][index];
                    }
                }

                if (index != 0) // worldmaparea is fallback for index 0
                    return null;

                areaEntry = _dbcRepository.WorldMapArea.Where(p => p.Value.Area == zoneId && mapId == p.Value.Map).SingleOrDefault();

                if (areaEntry.Equals(default(KeyValuePair<int, WorldMapArea>)))
                    return null;

                return new UiMapAssignment(mapId, zoneId, (uint)index, areaEntry.Value);
            }
        }

        public uint PickIndexForWmoGroupId(int wmoGroupId, int zoneId)
        {
            if (_uiMapAssignments.ContainsKey(zoneId))
            {
                foreach (var pair in _uiMapAssignments[zoneId])
                {
                    if (pair.Value.WmoGroupId.Contains(wmoGroupId))
                        return (uint)pair.Key;
                }

                return 0;
            }

            return 0;
        }

        public List<MapIndices> GetIndicesForZone(int zoneId)
        {
            if (_uiMapAssignments.ContainsKey(zoneId))
                return _uiMapAssignments[zoneId].Select(p => new MapIndices
                {
                    Index = (int)p.Value.Index,
                    Name = p.Value.WmoAreaOverride
                }).ToList();
            return new List<MapIndices>();
        }
    }
}
